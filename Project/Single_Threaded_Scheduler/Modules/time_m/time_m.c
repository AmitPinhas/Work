#include <time.h>      
#include "time_m.h"
#include "UI.h"

#define TRUE 1
#define FALSE 0

static int g_startTime;

/* --------------------------------------------------- statements local funtions -------------------------------------------------------------- */

static int CheckIfTaskReady(int _timeRunTask);

/*==============================================================================================================================================*/
/*============================================================== API ===========================================================================*/
/*==============================================================================================================================================*/

/* ------------------------------------------------- Time Wait Until Task Be Ready ------------------------------------------------------------ */
void TimeWait(int _nextTimeRun )
{
	int taskReday = FALSE ;
	
	while ( !taskReday )
	{
		taskReday = CheckIfTaskReady( _nextTimeRun );
	}
	
	return ;
}


/* ------------------------------------------------------- Time Set Start --------------------------------------------------------------------- */
void TimeSetStart()
{
	g_startTime = clock();
}


/* --------------------------------------------------- Time Update Run ----------------------------------------------------------------------- */
int TimeUpdateRun(int _period)
{
	return (clock()/CLOCKS_PER_SEC + _period) ;
}

/*==============================================================================================================================================*/
/*======================================================== local functions =====================================================================*/
/*==============================================================================================================================================*/

/* ---------------------------------------------------- Check If Task Ready ------------------------------------------------------------------- */
static int CheckIfTaskReady(int _timeRunTask )
{
	int currClock = (clock() - g_startTime)/CLOCKS_PER_SEC ;
	
	
	if ( currClock >= _timeRunTask )
	{
		UIPrintTime( currClock );		
		return TRUE;
	}
	
	return FALSE;
}

